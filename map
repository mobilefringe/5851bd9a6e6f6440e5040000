<div>
	<h1 class="page_title">Centre Map</h1>
	<hr />
	<div class="store_list_map_div">
        <div class="overlay2" onclick="style.pointerEvents='none'"></div>
        <div id="mapsvg_store_list"></div>     
    </div>
</div>
<div class="mobile_line_break"></div>
<script src="//mallmaverick.cdn.speedyrails.net/system/site_images/photos/000/005/107/original/mallmaverick_svgmap.js?1412885524"></script>
<script>
    $(document).ready(function(e){
        // init(e);
        function renderAll(){
            var stores = getStoresList();
            var store_region = stores.svgmap_region;
            var store_name = stores.name;
            var store_phone = stores.phone;
            var store_slug = stores.slug;
            console.log(stores);
            var map = $('#mapsvg_store_list').mapSvg({
                source: getSVGMapURL(),    // Path to SVG map
                colors: {stroke: '#aaaaaa', selected: -20, hover: "#a6a6a6"},
                disableAll: true,
                regions: {
                    store_region: {
                        tooltip:"<div class='tooltip_div'><p class='tooltip_name'>" + store_name + "</p><span><div class='tooltip_phone_div'><img class='tooltip_phone_icon' src='{{3999 | get_image_url}}'/><p class='tooltip_phone'>" + store_phone + "</p></div>{% assign store_promo = store.current_promotions | size %}<div class='tooltip_promo_div'>{% if store_promo > 0%}<img class='tooltip_promo_icon' src='{{4000 | get_image_url}}' /><p class='tooltip_promo'>{{store_promo}}</p>{% endif %}</div></span></div>",
                    attr:{
        					href:'/stores/' + store_slug;
    					}
    				},
                },
                tooltipsMode:'custom',
                zoom:true,
                zoomButtons: {'show': true, 'location': 'left'},
                pan:true,
                cursor:'pointer',
                responsive:true,
                zoomLimit: [0,10],
            });
        }
        loadMallDataCached(renderAll);
    })
</script>